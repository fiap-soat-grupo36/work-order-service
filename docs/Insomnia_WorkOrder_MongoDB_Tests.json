type: collection.insomnia.rest/5.0
schema_version: "5.1"
name: Work Order MongoDB - Tests
meta:
  id: wrk_256364786ab040268c6c585da9e0891f
  created: 1771499559753
  modified: 1771499559753
  description: ""
collection:
  - name: 1. Customer Service (PostgreSQL)
    meta:
      id: fld_7b69ccc57f25423fb275c403ee4470e8
      created: 1771499559755
      modified: 1771499666757
      sortKey: -1771499559864
      description: Serviços de cliente e veículo - PostgreSQL porta 8081
    children:
      - url: "{{ _.baseUrl }}:{{ _.customerPort }}/api/clientes"
        name: Criar Cliente
        meta:
          id: req_d724c68438cc49b1a39b77d60eec677f
          created: 1771499559756
          modified: 1771499649230
          isPrivate: false
          description: Cria um novo cliente no PostgreSQL (customer-service)
          sortKey: -1771499559808
        method: POST
        body:
          mimeType: application/json
          text: |-
            {
              "nome": "Carlos Mendes",
              "email": "carlos.mendes@email.com",
              "telefone": "11977665544",
              "cpf": "12312312399",
              "ativo": true
            }
        headers:
          - name: Content-Type
            value: application/json
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.baseUrl }}:{{ _.customerPort }}/api/clientes/3"
        name: Buscar Cliente por ID
        meta:
          id: req_bc4058d44f4a495f9519982a54c3d4e7
          created: 1771499559757
          modified: 1771499644716
          isPrivate: false
          description: Busca Carlos Mendes (cliente recém criado)
          sortKey: -1771499559858
        method: GET
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.baseUrl }}:{{ _.customerPort }}/api/veiculos"
        name: Criar Veículo
        meta:
          id: req_fd0b86aba4b146e79221e0d1e396f98f
          created: 1771499559757
          modified: 1771499660099
          isPrivate: false
          description: Cria veículo associado ao cliente ID 3 (Carlos Mendes)
          sortKey: -1771499559758
        method: POST
        body:
          mimeType: application/json
          text: |-
            {
              "placa": "DEF4567",
              "marca": "Chevrolet",
              "modelo": "Onix",
              "ano": 2024,
              "cor": "Vermelho",
              "clienteId": 3,
              "ativo": true
            }
        headers:
          - name: Content-Type
            value: application/json
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.baseUrl }}:{{ _.customerPort }}/api/clientes/3"
        name: Atualizar Telefone Cliente
        meta:
          id: req_6ddbeb9d2455484dae88545a6ab09305
          created: 1771499559758
          modified: 1771499559758
          isPrivate: false
          description: Atualiza telefone de 11977665544 para 11955554444 - para testar
            dados em tempo real no MongoDB
          sortKey: -1771499559758
        method: PUT
        body:
          mimeType: application/json
          text: |-
            {
              "nome": "Carlos Mendes",
              "email": "carlos.mendes@email.com",
              "telefone": "11955554444",
              "cpf": "12312312399",
              "ativo": true
            }
        headers:
          - name: Content-Type
            value: application/json
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.baseUrl }}:{{ _.customerPort }}/api/veiculos/3"
        name: Buscar Veículo por ID
        meta:
          id: req_e3046c6b8877424689175bb0b62bf5b5
          created: 1771499559758
          modified: 1771499661890
          isPrivate: false
          description: Busca Chevrolet Onix (veículo recém criado)
          sortKey: -1771499559783
        method: GET
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
  - name: 2. Work Order Service (MongoDB)
    meta:
      id: fld_e10114b056944f46a965321e25bea5a3
      created: 1771499559760
      modified: 1771499676115
      sortKey: -1771499559814
      description: Ordens de Serviço - MongoDB porta 8087
    children:
      - url: "{{ _.baseUrl }}:{{ _.workOrderPort }}/api/ordens-servico"
        name: Listar Todas as OSs
        meta:
          id: req_1245bbd97a16490d868f322fa22dc1f3
          created: 1771499559761
          modified: 1771499559761
          isPrivate: false
          description: Lista todas as OSs do MongoDB com dados enriquecidos
          sortKey: -1771499559761
        method: GET
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.baseUrl }}:{{ _.workOrderPort }}/api/ordens-servico"
        name: Criar Ordem de Serviço
        meta:
          id: req_1d8ee8ccbd024c87831328d9936267b6
          created: 1771499559761
          modified: 1771499559761
          isPrivate: false
          description: Cria OS no MongoDB validando Carlos Mendes + Chevrolet Onix via Feign
          sortKey: -1771499559761
        method: POST
        body:
          mimeType: application/json
          text: >-
            {
              "clienteId": 3,
              "veiculoId": 3,
              "observacoes": "Revisao dos 10.000 km - Teste MongoDB + Feign Client"
            }
        headers:
          - name: Content-Type
            value: application/json
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.baseUrl }}:{{ _.workOrderPort
          }}/api/ordens-servico/69963c0e67ed7e07c1cce2d7"
        name: Buscar OS por ID (ObjectId)
        meta:
          id: req_404610dbf6d840e689b3a6f17bc4c881
          created: 1771499559762
          modified: 1771499559762
          isPrivate: false
          description: Busca OS específica usando String (ObjectId do MongoDB)
          sortKey: -1771499559762
        method: GET
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.baseUrl }}:{{ _.workOrderPort }}/api/ordens-servico/por-cliente/3"
        name: Buscar OSs por Cliente
        meta:
          id: req_2b564a33ba1749eb8f0ea9b7c0dee014
          created: 1771499559763
          modified: 1771499559763
          isPrivate: false
          description: Lista todas as OSs de Carlos Mendes
          sortKey: -1771499559763
        method: GET
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.baseUrl }}:{{ _.workOrderPort }}/api/ordens-servico/por-veiculo/3"
        name: Buscar OSs por Veículo
        meta:
          id: req_80d5150bfcf945f2813b5b517006cd40
          created: 1771499559763
          modified: 1771499559763
          isPrivate: false
          description: Lista todas as OSs do Chevrolet Onix
          sortKey: -1771499559763
        method: GET
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
  - name: 3. Testes de Integração
    meta:
      id: fld_facc537b44664743ac4f8e90ed15df02
      created: 1771499559764
      modified: 1771499559764
      sortKey: -1771499559764
      description: Cenários de teste completos
    children:
      - url: "{{ _.baseUrl }}:{{ _.workOrderPort }}/api/ordens-servico"
        name: "Teste: Dados em Tempo Real"
        meta:
          id: req_374cb2f156cc4169b069ae90ca79fdf4
          created: 1771499559764
          modified: 1771499559764
          isPrivate: false
          description: "TESTE: Execute após atualizar telefone do cliente - deve mostrar
            telefone novo em todas as OSs"
          sortKey: -1771499559764
        method: GET
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.baseUrl }}:{{ _.workOrderPort }}/api/ordens-servico"
        name: "Teste: Validação Feign (Veículo Inválido)"
        meta:
          id: req_6d0eb5d5799a4b7c873c0cc04f10c469
          created: 1771499559765
          modified: 1771499559765
          isPrivate: false
          description: "TESTE: Deve retornar erro 404 - Veículo não encontrado via Feign"
          sortKey: -1771499559765
        method: POST
        body:
          mimeType: application/json
          text: |-
            {
              "clienteId": 3,
              "veiculoId": 999,
              "observacoes": "Teste: deve falhar pois veículo 999 não existe"
            }
        headers:
          - name: Content-Type
            value: application/json
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
cookieJar:
  name: Default Jar
  meta:
    id: jar_63225b3cbdfbdc231a189f47c58419afb90be649
    created: 1771499562769
    modified: 1771499562769
environments:
  name: Base Environment
  meta:
    id: env_a19bb3e7d69245b0aa86abb7a143b325
    created: 1771499559755
    modified: 1771499559755
    isPrivate: false
  data:
    baseUrl: http://localhost
    customerPort: "8081"
    workOrderPort: "8087"
